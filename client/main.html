<head>
  <title>god-game</title>
</head>

<body>
  <h1>Welcome to Meteor!</h1>
  {{> game}}
</body>

<template name="game">
  {{#with game}}
    <button disabled="{{resources.food.atLimit}}" class="tap">Tap for food</button>
    <button disabled="{{cannotRefineFoodToWood}}" class="refineFood">Refine Food</button>
    {{> resourceList resources=getResources }}
    {{> buildings buildings=getBuildings}}
    {{> people people=game.people }}
  {{/with}}
</template>

<template name='buildings'>
  {{#each buildings}}
    <button class="buy" disabled='{{cannotBuy}}'>
      {{name}} ({{getValue}})
    </button>
  {{/each}}
</template>


<template name='resourceList'>
  <table class="table resTable">
    <tr class="resourceRow">
      <td>{{../people.name}}:</td>
      <td class="resLimitWarn">{{formatNumber ../people.getValue}}</td>
    </tr>
    {{#each resources}}
      {{> resource }}
    {{/each}}
  </table>
</template>

<template name='resource'>
  <tr class="resourceRow">
    <td>{{name}}:</td>
    <td class="resLimitWarn">{{formatNumber getValue}}</td>
      <td class="maxRes">/{{formatLimit getMaxValue}}</td>
      <td>({{formatTick getTick}})</td>
  </tr>
</template>

<template name='people'>
  available people {{people.assignmentAvailable.get}}
  {{#each job}}
  {{name}} ({{value}}) <button class="plus">+</button><button class="minus">-</button>
  {{/each}}
</template>