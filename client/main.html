<head>
  <title>What to name :?</title>
</head>

<body>
  <div class="container-fluid">
    {{> game }}
  </div>
</body>

<template name="game">
  <div id='game' class="row">
    {{#if game.ready.get}}
      {{#with game}}
        <div class="col-md-3">
          {{> resContainer }}
        </div>
        <div class="col-md-6">
          {{> contentContainer }}
        </div>
        <div class="col-md-3">
          {{> infoContainer }}
        </div>
      {{/with}}
    {{/if}}
  </div>
</template>

<template name='resContainer'>
  {{> resourceTable }}
  {{> boughtTech }}
</template>

<template name='boughtTech'>
  {{#with tech}}
    <div class="card">
      <div class="card-header">
      <h4 class="card-title text-xs-center">Owned Technology</h4>
      </div>
      <ul class="list-group list-group-flush ownedTech">
        {{#each this }}
            <li class="list-group-item hint">{{name}}</li>
        {{/each}}
      </ul>
    </div>
  {{/with}}
</template>

<template name='resourceTable'>
  <table class="table table-sm">
    <thead class="thead-default">
      <tr>
        <th>Name</th>
        <th>Value</th>
        <th>Max</th>
        <th>Change/s</th>
      </tr>
    </thead>
    {{#each getBucket 'resources' }}
      {{#unless hide}}
        {{> tableResourceRow }}
      {{/unless}}
    {{/each}}
  </table>
</template>

<template name='tableResourceRow'>
  <tr class="resourceRow hint">
    <td>{{name}}:</td>
    <td>{{formatNumber getValue}}</td>
    <td>{{formatNumber getMaxValue}}</td>
    <td>{{formatTick getTickValue}}</td>
  </tr>
</template>

<template name='contentContainer'>
  <div class="card">
    <div class="card-header">
      <h3 class="card-title">Actions</h3>
    </div>
    <div class="card-block">
      <div class="row">
        {{#each getBucket 'actions' }}
        <div class="col-md-6">
          {{> action }}
        </div>
        {{/each}}
      </div>
    </div>
  </div>
  {{#with tech}}
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Technology</h3>
      </div>
      <div class="card-block">
        <div class="row">
          {{#each this }}
            <div class="col-md-6">
              {{> technology }}
            </div>
          {{/each}}
        </div>
      </div>
    </div>
  {{/with}}
</template>

<template name='action'>
  <div class="hint p-b-1">
    <button class="btn btn-primary btn-lg btn-block" disabled='{{disabled}}'>
      {{#if time.get}}
        <progress class="progress progress-striped" value="{{time.get}}" max="{{waitTime}}"></progress>
      {{else}}
        <div class="text-uppercase">{{name}} </div>
      {{/if}}
    </button>
  </div>
</template>

<template name='technology'>
  <div class="hint p-b-1">
    <button class="btn btn-primary btn-lg btn-block" disabled='{{cannotBuy}}'>
      {{name}} 
    </button>
  </div>
</template>

<template name='infoContainer'>
  {{> hoverHint }}
  {{> log }}
</template>

<template name='log'>
  {{#if log}}
    <div class="card text-xs-center">
      <h4 class="card-header">Activity Log</h4>
      <div class="card-block">
        {{#each log}}
          <span class="text-{{color}}">{{message}}</span><br>
        {{/each}}
      </div>
    </div>
  {{/if}}
</template>

<template name='hoverHint'>
  {{#if hint}}
    <div class="card text-xs-center">
      <h3 class="card-header text-uppercase">{{key}}</h3>
      <div class="card-block">
        <p class="card-text">{{hint.description}}</p>
        {{#if hint.cost}}
          <h5 class="card-title">cost</h5>
          <p class="card-text">{{hint.cost}}</p>
        {{/if}}
      </div>
    </div>
  {{/if}}
</template>